import{i as S,Z as T,r as x,o as s,c as o,a as h,w,b as t,t as i,F as m,d as f,g as d,y as M,p,f as u,n as v}from"./app-CX_myoSc.js";import{A as B,s as j}from"./slugify-Cnog09cP.js";import{F as z}from"./v3-B601JB4Q.js";import{M as N}from"./MainNavbar-fBqnChDJ.js";import{C as F}from"./ClientFooterDown-D-V3Bz3C.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";const E={name:"Page",data(){return{blocks:this.page.data.content,userData:this.$page.props.auth.user,toggler:!1,editorImages:[],galleryImages:[],slide:1,currentNavSection:null,scrollTop:!1,headerNavs:this.page.data.content.filter(r=>r.type==="heading").map(r=>({id:r.data.id,text:r.data.content}))}},props:["navigation","page","subSectionPages","breadcrumbs"],components:{ClientFooterDown:F,MainNavbar:N,AdminLayout:B,Link:S,FsLightbox:z,Head:T},methods:{textLimit(r,a){if(r.length>a){let c;return c=r.substring(0,a),c+"..."}return r},openEditorImagesOnSlide:function(r){this.slide=r,this.toggler=!this.toggler},isSameRoute(r){if(this.$page.props.ziggy.location===this.$page.props.ziggy.url+"/"+r)return!0},generateSlug:function(r){return j(r,{lower:!0,strict:!0,locale:"ru"})},onScroll(r){window.top.scrollY>100?this.scrollTop=!0:this.scrollTop=!1},scrollToTop(){window.scrollTo(0,0)}},mounted(){window.addEventListener("scroll",this.onScroll);const r=document.querySelectorAll("h2"),a=document.querySelector("#visor");let c=null;window.addEventListener("scroll",()=>{for(let g=0;g<r.length;g++){const l=r[g],n=l.getBoundingClientRect(),_=a.getBoundingClientRect();if(n.top>=0&&n.bottom<=window.innerHeight&&n.bottom>=_.top&&n.top<=_.bottom){l!==c&&(this.currentNavSection=l.id,c=l);break}}})},beforeDestroy(){window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("scroll",this.onScroll)},computed:{}},H=t("meta",{name:"description",content:"Your page description"},null,-1),V=t("div",{class:"w-full h-[67px] fixed",id:"visor"},null,-1),A={class:"relative mx-auto mt-[67px] max-w-screen-xl px-4 py-10 md:flex md:flex-row md:py-10"},R={class:"sticky top-[121px] hidden h-[calc(100vh-121px)] max-w-[20%] md:flex md:shrink-0 md:flex-col md:justify-between"},I={key:0,class:"styled-scrollbar flex h-[calc(100vh-200px)] flex-col overflow-y-scroll pr-2 pb-4"},P={class:"text-gray-1000 mb-2 text-md font-medium"},q={class:"flex gap-x-1"},Y={class:"px-0.5 last-of-type:mb-0 mb-8"},O=["href"],Z={class:"order-last hidden w-56 shrink-0 lg:block"},G={key:0,class:"sticky top-[126px] h-[calc(100vh-121px)]"},J=t("div",{class:"text-gray-1000 mb-2 text-md font-medium"},"На этой странице",-1),K={class:"styled-scrollbar max-h-[70vh] space-y-1.5 overflow-y-auto py-2 text-sm"},Q=["href"],U=t("button",{class:"bg-transperant text-gray-600 cursor-pointer hover:text-gray-900 duration-300 block px-2 leading-[1.6] rounded-md"},"К началу",-1),W=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-[17px] text-gray-600"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 11.25l-3-3m0 0l-3 3m3-3v7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),X=[U,W],$={class:"w-full min-w-0 mt-1 max-w-6xl px-1 md:px-6",style:{}},tt={class:"space-y-5 md:space-y-5"},et={class:"flex justify-between pb-4 items-center mb-6"},st={class:"flex w-full sm:items-center gap-x-5 sm:gap-x-3"},ot={class:"grow"},rt={class:"grid sm:flex sm:justify-between sm:items-center gap-2"},it={key:0,class:"flex items-center whitespace-nowrap min-w-0","aria-label":"Breadcrumb"},at=t("li",{class:"text-sm"},[t("span",{class:"flex items-center text-gray-500 hover:text-blue-600"},[u(" Главная "),t("svg",{class:"flex-shrink-0 mx-3 overflow-visible h-2.5 w-2.5 text-gray-400",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M5 1L10.6869 7.16086C10.8637 7.35239 10.8637 7.64761 10.6869 7.83914L5 14",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})])])],-1),nt={class:"text-sm"},lt=t("svg",{class:"flex-shrink-0 mx-3 overflow-visible h-2.5 w-2.5 text-gray-400",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M5 1L10.6869 7.16086C10.8637 7.35239 10.8637 7.64761 10.6869 7.83914L5 14",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1),dt={class:"text-sm"},ct=t("svg",{class:"flex-shrink-0 mx-3 overflow-visible h-2.5 w-2.5 text-gray-400",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M5 1L10.6869 7.16086C10.8637 7.35239 10.8637 7.64761 10.6869 7.83914L5 14",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1),ht={class:"text-sm"},mt={key:1,class:"flex items-center whitespace-nowrap min-w-0","aria-label":"Breadcrumb"},ut=t("li",{class:"text-sm"},[t("span",{class:"flex items-center text-gray-500 hover:text-blue-600",href:"/"},[u(" Главная "),t("svg",{class:"flex-shrink-0 mx-3 overflow-visible h-2.5 w-2.5 text-gray-400",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M5 1L10.6869 7.16086C10.8637 7.35239 10.8637 7.64761 10.6869 7.83914L5 14",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})])])],-1),xt={class:"text-sm"},pt={class:"space-y-3"},gt={class:"text-2xl mb-10 font-bold md:text-3xl"},_t={id:"page-area",class:"space-y-5 md:space-y-5"},ft={key:0},wt=["id"],vt={key:1},yt=["src"],bt=["innerHTML"],kt={key:3},Lt={class:"flex border rounded-lg px-4 py-2 items-center justify-between"},Ct={class:"flex items-center"},St=t("div",{class:"w-[35px] h-[35px] bg-black flex justify-center items-center rounded-xl mr-2"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18.375 12.739l-7.693 7.693a4.5 4.5 0 01-6.364-6.364l10.94-10.94A3 3 0 1119.5 7.372L8.552 18.32m.009-.01l-.01.01m5.699-9.941l-7.81 7.81a1.5 1.5 0 002.112 2.13",stroke:"white"})])],-1),Tt=["href"],Mt=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})],-1),Bt=[Mt],jt={key:4},zt={key:0,class:"w-full mx-auto"},Nt=["href"],Ft=t("div",{class:"flex-shrink-0 relative w-full rounded-xl overflow-hidden w-full h-[350px] before:absolute before:inset-x-0 before:w-full before:h-full before:bg-gradient-to-t before:from-gray-900/[.7] before:z-[1]"},null,-1),Dt={class:"absolute top-0 inset-x-0 z-10"},Et={class:"p-4 flex flex-col h-full sm:p-6"},Ht={class:"flex items-center"},Vt={class:"ms-2.5 sm:ms-4"},At={class:"font-semibold text-white"},Rt={class:"text-xs text-white/[.8]"},It={class:"absolute bottom-0 inset-x-0 z-10"},Pt={class:"flex flex-col h-full p-4 sm:p-6"},qt={class:"text-lg sm:text-3xl font-semibold text-white group-hover:text-white/[.8]"},Yt={class:"mt-2 text-white/[.8]"},Ot={key:1,class:"flex flex-col rounded-xl p-4 md:p-6 bg-white border border-gray-200 dark:bg-slate-900 dark:border-gray-700"},Zt={class:"flex items-center gap-x-4"},Gt=["src"],Jt={class:"grow"},Kt={class:"text-xs text-gray-500 mt-2"},Qt={class:"text-xs text-gray-500 mt-2"},Ut=["href"];function Wt(r,a,c,g,l,n){const _=x("Head"),y=x("MainNavbar"),b=x("Link"),k=x("ClientFooterDown"),L=x("FsLightbox");return s(),o(m,null,[h(_,null,{default:w(()=>[t("title",null,i(c.page.data.title),1),H]),_:1}),h(y,{class:"border-b",sections:this.navigation},null,8,["sections"]),V,t("div",A,[t("div",R,[this.subSectionPages?(s(),o("nav",I,[t("div",P,i(c.page.data.section),1),t("div",q,[t("ul",Y,[(s(!0),o(m,null,f(this.subSectionPages.data,e=>(s(),o("li",{key:e.id,class:"my-1.5 flex"},[t("a",{class:v([{"text-white hover:text-gray-200 font-semibold bg-[#135aae]":n.isSameRoute(e.path),"text-gray-600 hover:text-[#2C6288]":!n.isSameRoute(e.path)},"relative duration-300 flex w-full rounded-md cursor-pointer items-center px-2 py-1 text-left text-sm"]),href:e.is_url?e.path:r.route("page.view",e.path)+"/"},i(e.title),11,O)]))),128))])])])):d("",!0)]),t("nav",Z,[l.headerNavs.length>0?(s(),o("div",G,[J,t("ul",K,[(s(!0),o(m,null,f(l.headerNavs,e=>(s(),o("li",{class:"anchor-li",key:e.id},[t("a",{class:v([{"translate-x-2 text-[#135aae]":l.currentNavSection===n.generateSlug(e.text),"bg-transperant text-gray-600 hover:text-gray-900":l.currentNavSection!==n.generateSlug(e.text)},"duration-150 block py-1 px-2 leading-[1.6] rounded-md"]),href:"#"+n.generateSlug(e.text)},i(e.text),11,Q)]))),128)),h(M,{name:"fade"},{default:w(()=>[l.scrollTop?(s(),o("li",{key:0,class:"anchor-li flex items-center py-2 border-t",onClick:a[0]||(a[0]=p((...e)=>n.scrollToTop&&n.scrollToTop(...e),["prevent"]))},X)):d("",!0)]),_:1})])])):d("",!0)]),t("article",$,[t("div",tt,[t("div",et,[t("div",st,[t("div",ot,[t("div",rt,[c.breadcrumbs?(s(),o("ol",it,[at,t("li",nt,[t("span",{class:"flex items-center text-gray-500 hover:text-blue-600",onClick:a[1]||(a[1]=p(()=>{},["prevent"]))},[u(i(this.breadcrumbs.mainSection)+" ",1),lt])]),t("li",dt,[t("span",{class:"flex items-center text-gray-500 hover:text-blue-600",onClick:a[2]||(a[2]=p(()=>{},["prevent"]))},[u(i(this.breadcrumbs.subSection)+" ",1),ct])]),t("li",ht,[t("span",{class:"flex items-center text-gray-500 hover:text-blue-600",onClick:a[3]||(a[3]=p(()=>{},["prevent"]))},i(n.textLimit(this.breadcrumbs.page,40)),1)])])):d("",!0),c.breadcrumbs?d("",!0):(s(),o("ol",mt,[ut,t("li",xt,[t("span",{class:"flex items-center text-gray-500 hover:text-blue-600",onClick:a[4]||(a[4]=p(()=>{},["prevent"]))},i(this.page.data.title),1)])]))])])])]),t("div",pt,[t("h1",gt,i(c.page.data.title),1)]),t("div",_t,[(s(!0),o(m,null,f(this.blocks,e=>(s(),o(m,{key:e.id},[e.type==="heading"?(s(),o("div",ft,[t("h2",{id:n.generateSlug(e.data.content),class:"font-bold text-xl"},i(e.data.content),9,wt)])):d("",!0),e.type==="image"?(s(),o("div",vt,[(s(!0),o(m,null,f(e.data.url,C=>(s(),o("img",{loading:"lazy",class:"mx-auto object-cover rounded-sm hover:opacity-95 hover:duration-200 transition",src:"/storage/"+C,alt:""},null,8,yt))),256))])):d("",!0),e.type==="paragraph"?(s(),o("div",{key:2,class:"paragraph-container",innerHTML:e.data.content},null,8,bt)):d("",!0),e.type==="attaches"?(s(),o("div",kt,[t("div",Lt,[t("div",Ct,[St,t("div",null,i(e.data.title),1)]),t("a",{href:e.data.file.url,download:"",type:"button",class:"w-[35px] h-[35px] flex bg-gray-100 rounded-lg justify-center items-center hover:bg-gray-200 duration-200"},Bt,8,Tt)])])):d("",!0),e.type==="linkTool"?(s(),o("div",jt,[e.data.meta.type==="post"?(s(),o("div",zt,[t("a",{class:"group relative block rounded-xl dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",href:e.data.link},[Ft,t("div",Dt,[t("div",Et,[t("div",Ht,[t("div",Vt,[t("h4",At,i(e.data.meta.data.authors[0].name),1),t("p",Rt,i(e.data.meta.data.created_post),1)])])])]),t("div",It,[t("div",Pt,[t("h3",qt,i(e.data.meta.data.title),1),t("p",Yt,i(n.textLimit(e.data.meta.description,200)),1)])])],8,Nt)])):d("",!0),e.data.meta.type==="student"?(s(),o("div",Ot,[t("div",Zt,[t("img",{loading:"lazy",class:"rounded-xl w-[150px]",src:e.data.meta.data.photo,alt:"Image Description"},null,8,Gt),t("div",Jt,[h(b,{href:e.data.link,class:"font-medium text-gray-800 hover:text-gray-500 underline"},{default:w(()=>[u(i(e.data.meta.title),1)]),_:2},1032,["href"]),t("p",Kt,i(e.data.meta.data.position),1),t("p",Qt,[u(i(e.data.meta.data.contactEmail)+" / ",1),t("a",{href:e.data.meta.data.vk_link},"Вконтакте",8,Ut)])])])])):d("",!0)])):d("",!0)],64))),128))])])])]),h(k),h(L,{class:"z-1000",slide:l.slide,toggler:l.toggler,sources:l.editorImages},null,8,["slide","toggler","sources"])],64)}const re=D(E,[["render",Wt]]);export{re as default};
