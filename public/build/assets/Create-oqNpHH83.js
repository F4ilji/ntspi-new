import{i as _,r as t,o as g,c as h,w as l,a as m,b as d,m as b,d as y}from"./app-I_nywxil.js";import{A as V}from"./AdminLayout-ohe3ElHe.js";import{c as I,b as J,a as k,A as D}from"./AdminFormLayout-kcpKeHIz.js";import{A as L}from"./AdminFormSelect-hT672IhQ.js";import{A as Z}from"./AdminFormDropZone-IVClPkLl.js";import{A as x}from"./AdminFormCheckbox-M9a2Td3z.js";import{A as B}from"./AdminFormEditorJs-UKK3BIIw.js";import{_ as S}from"./_plugin-vue_export-helper-x3n3nnut.js";import"./dropzone-Zgtom8eU.js";const w={name:"Create",components:{AdminFormButton:I,AdminFormEditorJs:B,AdminFormCheckbox:x,AdminFormDropZone:Z,AdminFormSelect:L,AdminFormInput:J,AdminFormHeader:k,AdminFormLayout:D,AdminLayout:V,Link:_},props:["errors","categories"],data(){return{form:this.$inertia.form({title:null,content:null,category_id:"",is_published:!0,author:null,images:null})}},methods:{async submitForm(){await this.requestImageFromChildComponentDropZone(),await this.store()},store(){this.form.post(route("admin.post.store"))},async getImageFromChildComponentDropZone(n){n&&(this.form.images=n)},async getContentFromChildComponentEditorJs(n){const o=JSON.parse(JSON.stringify(n));this.form.content=o},requestImageFromChildComponentDropZone(){this.$refs.dropzoneComponent.saveImages()}}},E={class:"grid gap-4 mb-4 sm:grid-cols-2"};function v(n,o,G,N,e,i){const a=t("AdminFormHeader"),s=t("AdminFormInput"),p=t("AdminFormSelect"),u=t("AdminFormCheckbox"),c=t("AdminFormDropZone"),f=t("AdminFormEditorJs"),A=t("AdminFormButton"),F=t("AdminFormLayout"),C=t("AdminLayout");return g(),h(C,null,{default:l(()=>[m(F,null,{default:l(()=>[m(a,{title:"Добавить новость"}),d("form",{onSubmit:o[4]||(o[4]=y((...r)=>i.submitForm&&i.submitForm(...r),["prevent"]))},[d("div",E,[m(s,{modelValue:e.form.title,"onUpdate:modelValue":o[0]||(o[0]=r=>e.form.title=r),error:e.form.errors.title,placeholder:"Заголовок новости"},null,8,["modelValue","error"]),m(s,{modelValue:e.form.author,"onUpdate:modelValue":o[1]||(o[1]=r=>e.form.author=r),error:e.form.errors.author,placeholder:"Автор"},null,8,["modelValue","error"])]),m(p,{modelValue:e.form.category_id,"onUpdate:modelValue":o[2]||(o[2]=r=>e.form.category_id=r),categories:this.categories},null,8,["modelValue","categories"]),m(u,{modelValue:e.form.is_published,"onUpdate:modelValue":o[3]||(o[3]=r=>e.form.is_published=r),label:"Опубликовать сейчас"},null,8,["modelValue"]),m(c,{onGetImages:i.getImageFromChildComponentDropZone,label:"Загрузите фотографии",ref:"dropzoneComponent"},null,8,["onGetImages"]),m(f,{onGetContent:i.getContentFromChildComponentEditorJs,error:e.form.errors["content.blocks"],ref:"editorJsComponent"},null,8,["onGetContent","error"]),m(A,b(n.$attrs,{type:"submit",title:"Создать новость"}),null,16)],32)]),_:1})]),_:1})}const Q=S(w,[["render",v]]);export{Q as default};
